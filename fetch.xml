<project name="Fetch srcIncluded zip" default="applyPatches" basedir=".">
	<property name="downloadFileName"
	          value="eclipse-sourceBuild-srcIncluded-${buildID}.zip" />
	<available file="${fileName}" property="downloaded" value="true" />
	<target name="download" unless="downloaded">
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildID}/${downloadFileName}"
		     dest="${downloadFileName}"
		     usetimestamp="true" />
	</target>
	<target name="newSources"
	        depends="download"
	        description="Replace old unzipped sources with unmodified from the downloaded zip">
		<delete dir="SDK" />
		<mkdir dir="SDK" />
		<unzip dest="SDK" src="${downloadFileName}" />
		<delete>
			<fileset dir="SDK">
				<include name="**/*.so" />
			</fileset>
		</delete>
	</target>
	<target name="applyPatches" depends="newSources">
		<patch patchfile="./patches/eclipse-buildswtnatives.patch"
		       dir="./SDK"
		       strip="0" />
	</target>
	<target name="clean">
		<delete dir="SDK" />
	</target>
</project>
