<project name="Pdebuild bootstrap" default="genBuild" basedir=".">
	<property name="javacFailOnError" value="true" />
	<property file="build.properties" />
	<property file="p2.properties" />
	<target name="genBuild">
		<echo message="About to generate feature" />
		<pathconvert pathsep=", " property="plugins">
			<dirset dir="./build/plugins">
				<include name="*" />
				<exclude name="org.eclipse.equinox.http.jetty_2.0.0" />
			</dirset>

			<mapper>
				<chainedmapper>
					<flattenmapper />
					<globmapper from="*" to="plugin@*" />
				</chainedmapper>
			</mapper>
		</pathconvert>
		<eclipse.generateFeature featureId="${featureId}"
		                         buildDirectory="${buildDirectory}"
		                         baseLocation="${baseLocation}"
		                         pluginList="${pluginId}"
		                         includeLaunchers="false" />
		<echo message="About to generate source bundles and build.xml files" />
		<eclipse.buildScript elements="feature@org.eclipse.sdk"
		                     configInfo="linux,gtk,${buildArch}"
		                     buildingosgi="true"
		                     recursivegeneration="true"
		                     children="true" />
	</target>

</project>